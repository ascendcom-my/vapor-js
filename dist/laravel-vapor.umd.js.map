{"version":3,"file":"laravel-vapor.umd.js","sources":["../src/index.js"],"sourcesContent":["const axs = require('axios')\naxs.defaults.headers.common = {};\naxs.defaults.withCredentials = false;\n\nclass Vapor\n{\n    /**\n     * Store a file in S3 and return its UUID, key, and other information.\n     */\n    async store(file, options = {}) {\n        const response = await axs.post('/vapor/signed-storage-url', {\n            'bucket': options.bucket || '',\n            'content_type': options.contentType || file.type,\n            'expires': options.expires || '',\n            'visibility': options.visibility || '',\n            'disk': options.disk || 's3',\n        }, {\n            baseURL: options.baseURL || null,\n            headers: options.headers || {},\n            ...options.options\n        });\n\n        let headers = response.data.headers;\n\n        if ('Host' in headers) {\n            delete headers.Host;\n        }\n\n        if (typeof options.progress === 'undefined') {\n            options.progress = () => {};\n        }\n\n        const cancelToken = options.cancelToken || ''\n\n        await axs.put(response.data.url, file, {\n            cancelToken: cancelToken,\n            headers: headers,\n            onUploadProgress: (progressEvent) => {\n                options.progress(progressEvent.loaded / progressEvent.total);\n            }\n        })\n\n        response.data.extension = file.name.split('.').pop()\n\n        return response.data;\n    }\n}\n\nmodule.exports = new Vapor();\n"],"names":["axs","require","defaults","headers","common","withCredentials","module","exports","store","file","options","post","bucket","content_type","contentType","type","expires","visibility","disk","baseURL","response","data","Host","progress","put","url","cancelToken","onUploadProgress","progressEvent","loaded","total","extension","name","split","pop"],"mappings":"4RAAA,IAAMA,EAAMC,QAAQ,SACpBD,EAAIE,SAASC,QAAQC,OAAS,GAC9BJ,EAAIE,SAASG,iBAAkB,EA8C/BC,OAAOC,QAAU,gDAvCPC,eAAMC,EAAMC,YAAAA,IAAAA,EAAU,+BACDV,EAAIW,KAAK,4BAA6B,CACzDC,OAAUF,EAAQE,QAAU,GAC5BC,aAAgBH,EAAQI,aAAeL,EAAKM,KAC5CC,QAAWN,EAAQM,SAAW,GAC9BC,WAAcP,EAAQO,YAAc,GACpCC,KAAQR,EAAQQ,MAAQ,SAExBC,QAAST,EAAQS,SAAW,KAC5BhB,QAASO,EAAQP,SAAW,IACzBO,EAAQA,yBATTU,GAYN,IAAIjB,EAAUiB,EAASC,KAAKlB,QAbA,MAexB,SAAUA,UACHA,EAAQmB,UAGa,IAArBZ,EAAQa,WACfb,EAAQa,SAAW,8BAKjBvB,EAAIwB,IAAIJ,EAASC,KAAKI,IAAKhB,EAAM,CACnCiB,YAHgBhB,EAAQgB,aAAe,GAIvCvB,QAASA,EACTwB,iBAAkB,SAACC,GACflB,EAAQa,SAASK,EAAcC,OAASD,EAAcE,2BAM9D,OAFAV,EAASC,KAAKU,UAAYtB,EAAKuB,KAAKC,MAAM,KAAKC,MAExCd,EAASC"}